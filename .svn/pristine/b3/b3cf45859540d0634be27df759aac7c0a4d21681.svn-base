//
//  AlViewRelativeLayout.h
//  MyUIView
//
//  Created by Li Kai on 13-3-28.
//  Copyright (c) 2013å¹´ DomQiu. All rights reserved.
//

#ifndef __MyUIView__AlViewRelativeLayout__
#define __MyUIView__AlViewRelativeLayout__

#define kLayoutRelationAlignTopWith          1
#define kLayoutRelationAlignBottomWith       2
#define kLayoutRelationAlignLeftWith         3
#define kLayoutRelationAlignRightWith        4
#define kLayoutRelationAbove                 5
#define kLayoutRelationBelow                 6
#define kLayoutRelationToLeftOf              7
#define kLayoutRelationToRightOf             8

#define kLayoutRelationCenterHorizontalWith  9
#define kLayoutRelationCenterVerticalWith   10

#define kLayoutRelationAlignParentTop       11
#define kLayoutRelationAlignParentBottom    12
#define kLayoutRelationAlignParentLeft      13
#define kLayoutRelationAlignParentRight     14

#define kLayoutRelationSetSelfBound         15

#define kLayoutRelationCenterParentHorizontal  0x01
#define kLayoutRelationCenterParentVertical    0x02

#define VAR_LEFT    0
#define VAR_TOP     1
#define VAR_RIGHT   2
#define VAR_BOTTOM  3
#define VAR_HCENTER 4
#define VAR_VCENTER 5

#define RANGE_LOW_BOUND  0
#define RANGE_HIGH_BOUND 1

#define NA_VAR     -1

#define NA_RANGE   INT_MIN


typedef struct
{
    int leftOperandID;
    int rightOperandID;
    int constant;
    int relation;
} LayoutConstraint;

#include <list>

#include "AlViewContainerLayout.h"

using namespace std;


class AlViewRelativeLayout : public AlViewContainerLayout
{
public:
    
    //virtual void removeChild (int id);
    void setLayoutRelation (int leftOperandID, int rightOperandID, int layoutRelation);
    
    void onMeasure (AlViewLayoutParameter givenLayoutParam);
    
protected:
    
    list<LayoutConstraint> interpretedConstraints;
    list<LayoutConstraint> suspendingConstraints;
    
private:
    
    void interpretLayoutConstraint (LayoutConstraint originalLC);
    
    void interpretLayoutConstraint (list<LayoutConstraint>* reinterpretedConstraints, LayoutConstraint originalLC, CGSize bound);
    
    //void interpretLayoutConstraint (list<LayoutConstraint>* reinterpretedConstraints, LayoutConstraint originalLC, AlViewLayoutParameter layoutParam);
};

#endif /* defined(__MyUIView__AlViewRelativeLayout__) */
